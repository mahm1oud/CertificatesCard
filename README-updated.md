# نظام إصدار البطاقات والشهادات

هذا المشروع هو نظام متكامل لتصميم وإصدار البطاقات والشهادات بدعم كامل للغة العربية، مع محرر متقدم يوفر ميزات مثل سحب وإفلات الحقول، التدوير، تغيير الحجم، التحكم بالطبقات، ومعاينة فورية.

## المميزات الرئيسية

- محرر قوالب متقدم مع سحب وإفلات
- دعم كامل للغة العربية
- إمكانية تدوير العناصر (15 درجة لليمين/لليسار)
- تغيير حجم النصوص والصور مباشرة من شريط الأدوات
- التحكم في طبقات العناصر (رفع/خفض)
- إخفاء وإظهار العناصر
- شبكة إرشادية ونظام تجاذب للمحاذاة الدقيقة
- تصدير الصور مباشرة
- معالجة متكاملة للخطوط العربية
- نظام تسجيل دخول وإدارة مستخدمين
- دعم قاعدة بيانات PostgreSQL

## متطلبات النظام

- Node.js v18 أو أحدث
- قاعدة بيانات PostgreSQL
- متصفح حديث يدعم CSS Grid و Flexbox

## البنية التقنية

- **الواجهة الأمامية**: React, TypeScript, Tailwind CSS, shadcn/ui, React Query
- **الواجهة الخلفية**: Node.js, Express, TypeScript
- **قاعدة البيانات**: PostgreSQL مع Drizzle ORM
- **المصادقة**: Passport.js
- **معالجة الصور**: canvas, sharp, Konva.js
- **الخطوط**: خطوط عربية متنوعة

## الإعداد والتشغيل

### التثبيت

1. استنساخ المشروع:
   ```bash
   git clone <repository-url>
   cd certificates-card
   ```

2. تثبيت الإعتماديات:
   ```bash
   # تثبيت جميع الإعتماديات للمشروع
   ./scripts/setup.sh
   ```

### إعداد قاعدة البيانات

1. أنشئ قاعدة بيانات PostgreSQL
2. قم بإعداد ملف `.env` في المجلد الجذر مع متغيرات البيئة اللازمة:
   ```
   DATABASE_URL=postgresql://username:password@localhost:5432/certificates_db
   SESSION_SECRET=your-secret-session-key
   ```

3. قم بتنفيذ الهجرة الأولية لقاعدة البيانات:
   ```bash
   npm run db:push
   ```

### تشغيل المشروع في بيئة التطوير

```bash
# تشغيل الواجهة الأمامية والخلفية معًا
npm run dev

# تشغيل الواجهة الأمامية فقط
npm run dev:frontend

# تشغيل الواجهة الخلفية فقط
npm run dev:backend
```

### بناء المشروع للإنتاج

```bash
# بناء المشروع بالكامل
npm run build

# بناء الواجهة الأمامية فقط
npm run build:frontend

# بناء الواجهة الخلفية فقط
npm run build:backend
```

## نشر المشروع على استضافات منفصلة

هذا المشروع مصمم ليعمل مع استضافات منفصلة للواجهة الأمامية والخلفية.

### نشر الواجهة الأمامية

1. قم ببناء الواجهة الأمامية:
   ```bash
   npm run build:frontend
   ```

2. انشر محتويات مجلد `client/dist` على خدمة استضافة ساكنة مثل Netlify أو Vercel أو GitHub Pages
3. قم بتعديل متغير البيئة `VITE_API_URL` في ملف `.env.production` ليشير إلى عنوان الواجهة الخلفية المنشورة

### نشر الواجهة الخلفية

1. قم ببناء الواجهة الخلفية:
   ```bash
   npm run build:backend
   ```

2. انشر محتويات مجلد `server/dist` على خدمة استضافة Node.js مثل Render أو Heroku
3. تأكد من نقل المجلدات التالية إلى الاستضافة:
   - `shared/`: للأنواع والمخططات المشتركة
   - `fonts/`: للخطوط المستخدمة في المشروع
   - `uploads/`: لتخزين الملفات المرفوعة

4. قم بتعديل متغيرات البيئة اللازمة في ملف `.env.production` ليشمل:
   ```
   PORT=5000
   NODE_ENV=production
   DATABASE_URL=...
   SESSION_SECRET=...
   ALLOWED_ORIGINS=https://your-frontend-domain.com
   ```

## المساهمة في المشروع

نرحب بمساهماتكم! الرجاء اتباع هذه الخطوات:

1. قم بعمل fork للمشروع
2. أنشئ فرعًا جديدًا: `git checkout -b feature/your-feature-name`
3. قم بإجراء التغييرات المطلوبة مع التزامك بنمط الكود الموجود
4. اختبر تغييراتك جيدًا
5. قم بعمل push للتغييرات: `git push origin feature/your-feature-name`
6. أرسل طلب سحب (Pull Request)

## الترخيص

هذا المشروع مرخص تحت MIT License - راجع ملف LICENSE للتفاصيل.
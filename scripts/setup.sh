#!/bin/bash

# ุฅุนุฏุงุฏ ุงููุดุฑูุน ุจุชุซุจูุช ุงูุญุฒู ูุฅุนุฏุงุฏ ุงูุจูุฆุฉ

echo "๐ง ุฅุนุฏุงุฏ ูุดุฑูุน Certificates Card..."
echo "๐ง ุชุซุจูุช ุงูุฅุนุชูุงุฏูุงุช ุงููุดุชุฑูุฉ..."

# ุฅูุดุงุก ูุฌูุฏุงุช ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ
mkdir -p uploads
mkdir -p uploads/generated
mkdir -p temp

# ุชุซุจูุช ุงูุญุฒู ููู Frontend
echo "๐ฆ ุชุซุจูุช ุญุฒู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ..."
cd client && npm install
cd ..

# ุชุซุจูุช ุงูุญุฒู ููู Backend
echo "๐ฆ ุชุซุจูุช ุญุฒู ุงููุงุฌูุฉ ุงูุฎูููุฉ..."
cd server && npm install
cd ..

# ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ
if [ -f ".env" ] && [ -n "$(grep DATABASE_URL .env)" ]; then
  echo "๐๏ธ ุชุญุฏูุซ ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
  npm run db:push
else
  echo "โ๏ธ ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุบูุฑ ุงูุจูุฆุฉ DATABASE_URL. ุณูุชู ุชุฎุทู ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช."
fi

echo "โ ุชู ุงูุฅุนุฏุงุฏ ุจูุฌุงุญ!"
echo "๐ ูุจุฏุก ุงูุชุทููุฑุ ูู ุจุชุดุบูู 'npm run dev'"
echo "๐๏ธ ูุจูุงุก ุงููุดุฑูุนุ ูู ุจุชุดุบูู 'npm run build'"
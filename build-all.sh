#!/bin/bash

# ุณูุฑูุจุช ุดุงูู ูุจูุงุก ูุชุฌููุน ุงููุดุฑูุน ูููุดุฑ
echo "๐ ุจุฏุก ุนูููุฉ ุงูุจูุงุก ุงูุดุงููุฉ..."

# ุชูููุฐ ุตูุงุญูุงุช ุงูุชูููุฐ ููุณูุฑูุจุชุงุช ุฏุงุฎู ุงููุฌูุฏุงุช
chmod +x client/build-dist.sh server/build-dist.sh
chmod +x package-files.sh

# 1. ุจูุงุก ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
echo "๐น ุฎุทูุฉ 1 ูู 3: ุจูุงุก ุงููุงุฌูุฉ ุงูุฃูุงููุฉ"
cd client
./build-dist.sh
cd ..

# ุงูุชุญูู ูู ูุฌุงุญ ุจูุงุก ุงููุงุฌูุฉ
if [ ! -d "client/dist" ]; then
    echo "โ ูุดู ูู ุจูุงุก ุงููุงุฌูุฉ ุงูุฃูุงููุฉ. ุชููู."
    exit 1
fi

# 2. ุจูุงุก ุงูุฎุงุฏู
echo "๐น ุฎุทูุฉ 2 ูู 3: ุจูุงุก ุงูุฎุงุฏู"
cd server
./build-dist.sh
cd ..

# ุงูุชุญูู ูู ูุฌุงุญ ุจูุงุก ุงูุฎุงุฏู
if [ ! -d "server/dist" ]; then
    echo "โ ูุดู ูู ุจูุงุก ุงูุฎุงุฏู. ุชููู."
    exit 1
fi

# 3. ุชุฌููุน ุงููููุงุช ูููุดุฑ
echo "๐น ุฎุทูุฉ 3 ูู 3: ุชุฌููุน ุงููููุงุช ูููุดุฑ"
./package-files.sh

echo "๐ ุชูุช ุนูููุฉ ุงูุจูุงุก ุงูุดุงููุฉ ุจูุฌุงุญ!"
echo "โน๏ธ ุงููููุงุช ุฌุงูุฒุฉ ูููุดุฑ ูู ูุฌูุฏ build"
echo "๐ ููุดุฑ ุงูุชุทุจููุ ูู ุจููู ูุญุชููุงุช ูุฌูุฏ build ุฅูู ูุฌูุฏ public_html ูู ุงุณุชุถุงูุชู"
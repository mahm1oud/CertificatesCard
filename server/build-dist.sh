#!/bin/bash

# ุณูุฑูุจุช ุจูุงุก ุงูุฎุงุฏู (server)
echo "๐๏ธ ุจุฏุก ุจูุงุก ุงูุฎุงุฏู..."

# ุฅูุดุงุก ูุฌูุฏ dist ุฅุฐุง ูู ููู ููุฌูุฏุงู
mkdir -p dist

# ุชูููุฐ ุฃูุฑ ุงูุจูุงุก
echo "โ๏ธ ุชูููุฐ ุฃูุฑ ุงูุจูุงุก..."
npx esbuild index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

# ุงูุชุญูู ูู ูุฌุงุญ ุนูููุฉ ุงูุจูุงุก
if [ $? -eq 0 ]; then
    echo "โ ุชู ุจูุงุก ุงูุฎุงุฏู ุจูุฌุงุญ! ุงููููุงุช ููุฌูุฏุฉ ูู dist/"
    # ุนุฑุถ ูุงุฆูุฉ ุงููููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง
    echo "๐ ูุงุฆูุฉ ุงููููุงุช ุงูููุดุฃุฉ:"
    ls -la dist/
else
    echo "โ ูุดู ูู ุจูุงุก ุงูุฎุงุฏู"
fi